<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" width="900" height="420" viewBox="0 0 900 420">
  <style>
    .actor { font: bold 12px sans-serif; }
    .note { font: 11px sans-serif; }
    .box { fill: #f6f8fa; stroke: #c6cbd1; }
    .arrow { stroke: #333; stroke-width: 1.2; marker-end: url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#333" />
    </marker>
  </defs>

  <!-- Actors -->
  <rect x="20" y="20" width="120" height="40" class="box" />
  <text x="30" y="45" class="actor">User</text>

  <rect x="160" y="20" width="160" height="40" class="box" />
  <text x="180" y="45" class="actor">MainWindow</text>

  <rect x="340" y="20" width="140" height="40" class="box" />
  <text x="360" y="45" class="actor">Viewport</text>

  <rect x="500" y="20" width="160" height="40" class="box" />
  <text x="520" y="45" class="actor">ToolManager</text>

  <rect x="680" y="20" width="160" height="40" class="box" />
  <text x="700" y="45" class="actor">Tool</text>

  <!-- Sequence arrows (simplified) -->
  <line x1="80" y1="90" x2="220" y2="90" class="arrow" />
  <text x="110" y="82" class="note">select tool</text>

  <line x1="260" y1="120" x2="360" y2="120" class="arrow" />
  <text x="280" y="112" class="note">viewport.tool_manager.activate(name)</text>

  <line x1="420" y1="140" x2="520" y2="140" class="arrow" />
  <text x="430" y="132" class="note">ToolManager.activate()</text>

  <line x1="640" y1="170" x2="740" y2="170" class="arrow" />
  <text x="660" y="162" class="note">Tool.activate()</text>

  <line x1="100" y1="220" x2="360" y2="220" class="arrow" />
  <text x="140" y="212" class="note">mousePressEvent → handle_mouse_press</text>

  <line x1="360" y1="250" x2="520" y2="250" class="arrow" />
  <text x="380" y="242" class="note">ToolManager → Tool.mouse_press</text>

  <line x1="360" y1="280" x2="520" y2="280" class="arrow" />
  <text x="380" y="272" class="note">ToolManager → Tool.mouse_move</text>

  <line x1="360" y1="310" x2="520" y2="310" class="arrow" />
  <text x="380" y="302" class="note">ToolManager → Tool.mouse_release</text>

  <line x1="720" y1="350" x2="500" y2="350" class="arrow" />
  <text x="540" y="342" class="note">Tool → UndoRedo.push()</text>

  <text x="20" y="390" class="note">Rendered simplified diagram of the tool lifecycle sequence. See `docs/tool_lifecycle.puml` for PlantUML source.</text>
</svg>